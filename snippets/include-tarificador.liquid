<div id="tarificadorCartShippingCalculatorWrapper" class="hidden" style="display: flex; flex-direction: column">
    <h4 style="text-align: center; margin: 0">Comuna de envío</h4>
    <div style="display: flex; flex-direction: column">
        <select style="min-height: 40px !important" id="provincesInput">
            <option value="">Cargando...</option>
        </select>
        <select style="min-height: 40px !important" class="hidden" id="citiesInput">
            <option value="">Debe seleccionar una región</option>
        </select>

        <div id="shippingEstimatePrice"></div>
    </div>
</div>

<style>
    #provincesInput,
    #citiesInput {
        border: 1px solid #dcdcdc;
    }

    .hidden {
        visibility: hidden;
    }

    #shippingEstimatePrice div:nth-child(2) {
        color: green;
        font-weight: bold;
    }
</style>

<script>
    window.HACIENDOLA = window.HACIENDOLA || {};
    window.HACIENDOLA.TARIFICADOR = window.HACIENDOLA.TARIFICADOR || {};
    window.HACIENDOLA.TARIFICADOR.shopUrl = '{{shop.permanent_domain}}';
    // ACÁ ES IMPORTANTE PONER EL VALOR DEL ID DEL ELEMENTO HTML Q CORRESPONDE AL BOTÓN DE IR AL CHECKOUT
    // POR LO GENERAL ES EL <input type="submit">
    window.HACIENDOLA.TARIFICADOR.goToCheckoutButtonName = 'checkout';
    window.HACIENDOLA.TARIFICADOR.cartCheckoutFormId = 'cart_form';
    window.HACIENDOLA.TARIFICADOR.forceSelection = false;
  
  	const _0x107e=['17UoauIX','replace','cartCheckoutFormId','<p\x20style=\x22margin:\x200;\x20font-weight:\x20bold;\x22>Tarifas\x20de\x20envío\x20disponibles:\x20</p>','findIndex','options','/cart/shipping_rates.json?shipping_address[city]=','getElementById','disabled','change','provincesInput','regionName','code','340574poyklf','regionShopifyCode','shipping_rates','length','shopUrl','<option\x20value=','json','500594zHPguY','</p>\x0a\x09\x09\x09\x09\x09\x09\x09</div>\x0a\x09\x09\x09\x09\x09\x09','name','1089365jEgrQG','&shipping_address[zip]=CL','shippingEstimatePrice','403323vmatCL','log','HACIENDOLA','<option\x20value=\x220\x22>Seleccione\x20región</option>','https://prod.haciendola.dev/backend/tarificador/api/regions/getShopEnabledRegions/','value','communes','classList','forceSelection','getElementsByName','preventDefault','addEventListener','text','hidden','printLastRates','stopPropagation','forEach','toFixed','<p\x20style=\x22margin:\x200;\x20font-weight:\x20bold;\x22>','\x0a\x09\x09\x09\x09\x09\x09\x09<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x22>\x0a\x09\x09\x09\x09\x09\x09\x09\x09<p\x20style=\x22margin:0\x22>','find','error','</p>\x0a\x09\x09\x09\x09\x09\x09\x09\x09<p\x20style=\x22margin:0\x22>$','ignoredRatesCode','TARIFICADOR','regionsWithCommunes','remove','selectedIndex','/cart?checkout[shipping_address][city]=','then','join','split','1134191XuBGNR','lastRates','&shipping_address[country]=Chile&shipping_address[province]=','price','<p\x20style=\x22color:#000;\x22>Calculando\x20envío...</span></p>','66241kOHguj','citiesInput','innerHTML','57163qAeOeZ'];const _0xa414=function(_0x1b9cee,_0x1b258e){_0x1b9cee=_0x1b9cee-0x196;let _0x107e6f=_0x107e[_0x1b9cee];return _0x107e6f;};const _0x432513=_0xa414;(function(_0x141479,_0xf0e1e){const _0x359439=_0xa414;while(!![]){try{const _0x589914=parseInt(_0x359439(0x1d1))*parseInt(_0x359439(0x1d2))+parseInt(_0x359439(0x1a3))+parseInt(_0x359439(0x1ce))+-parseInt(_0x359439(0x1c9))+-parseInt(_0x359439(0x19c))+parseInt(_0x359439(0x1a6))+-parseInt(_0x359439(0x1a9));if(_0x589914===_0xf0e1e)break;else _0x141479['push'](_0x141479['shift']());}catch(_0x9e002){_0x141479['push'](_0x141479['shift']());}}}(_0x107e,0xb713b),window['HACIENDOLA'][_0x432513(0x1c1)][_0x432513(0x1c2)]=[],window[_0x432513(0x1ab)][_0x432513(0x1c1)][_0x432513(0x1ca)]=[],window[_0x432513(0x1ab)][_0x432513(0x1c1)][_0x432513(0x1c0)]=[],window['HACIENDOLA'][_0x432513(0x1c1)][_0x432513(0x1b7)]=()=>console[_0x432513(0x1aa)](window[_0x432513(0x1ab)][_0x432513(0x1c1)]['lastRates']),number_format=(_0x1a11a9,_0x1d321f)=>{const _0x197731=_0x432513;_0x1a11a9+='',_0x1a11a9=parseFloat(_0x1a11a9[_0x197731(0x1d3)](/[^0-9\.]/g,'')),_0x1d321f=_0x1d321f||0x0;if(isNaN(_0x1a11a9)||_0x1a11a9===0x0)return parseFloat(0x0)[_0x197731(0x1ba)](_0x1d321f);_0x1a11a9=''+_0x1a11a9[_0x197731(0x1ba)](_0x1d321f);const _0x2c6ddd=_0x1a11a9[_0x197731(0x1c8)]('.'),_0x40e50b=/(\d+)(\d{3})/;while(_0x40e50b['test'](_0x2c6ddd[0x0]))_0x2c6ddd[0x0]=_0x2c6ddd[0x0][_0x197731(0x1d3)](_0x40e50b,'$1'+'.'+'$2');return _0x2c6ddd[_0x197731(0x1c7)]('.');},regionSelectChangeHandler=()=>{const _0x48ee7c=_0x432513,_0x1824a0=document[_0x48ee7c(0x196)](_0x48ee7c(0x1cf)),_0xbd31c5=document['getElementById'](_0x48ee7c(0x199))['value'];document['getElementById']('shippingEstimatePrice')[_0x48ee7c(0x1d0)]='',_0x1824a0[_0x48ee7c(0x1d0)]='',console['log'](_0xbd31c5),console[_0x48ee7c(0x1aa)](window[_0x48ee7c(0x1ab)][_0x48ee7c(0x1c1)][_0x48ee7c(0x1c2)]);const _0x16569f=window[_0x48ee7c(0x1ab)][_0x48ee7c(0x1c1)][_0x48ee7c(0x1c2)][_0x48ee7c(0x1bd)](_0x77bd8d=>_0x77bd8d[_0x48ee7c(0x19d)]===_0xbd31c5);let _0x42f5f3='<option\x20value=\x220\x22>Seleccione\x20comuna</option>';_0x16569f[_0x48ee7c(0x1af)][_0x48ee7c(0x1b9)](_0x29fca8=>_0x42f5f3+=_0x48ee7c(0x1a1)+_0x29fca8['id']+'>'+_0x29fca8['communeName']+'</option>'),_0x1824a0[_0x48ee7c(0x1d0)]=_0x42f5f3,_0x1824a0[_0x48ee7c(0x1b0)]['remove']('hidden');},communaSelectChangeHandler=()=>{const _0x257b9f=_0x432513,_0x59e538=document[_0x257b9f(0x196)](_0x257b9f(0x1cf)),_0x587ef3=document[_0x257b9f(0x196)](_0x257b9f(0x199)),_0x2331ba=_0x59e538[_0x257b9f(0x1d7)][_0x59e538[_0x257b9f(0x1c4)]][_0x257b9f(0x1b5)],_0x1eaa38=_0x587ef3['options'][_0x587ef3[_0x257b9f(0x1c4)]]['value'];document[_0x257b9f(0x196)]('shippingEstimatePrice')[_0x257b9f(0x1d0)]=_0x257b9f(0x1cd),fetch(_0x257b9f(0x1d8)+_0x2331ba+_0x257b9f(0x1cb)+_0x1eaa38+_0x257b9f(0x1a7))[_0x257b9f(0x1c6)](_0x23c419=>_0x23c419[_0x257b9f(0x1a2)]())[_0x257b9f(0x1c6)](_0xc4e525=>{const _0x2f37da=_0x257b9f;if(_0xc4e525[_0x2f37da(0x1be)]){document[_0x2f37da(0x196)](_0x2f37da(0x1a8))['innerHTML']=_0x2f37da(0x1bb)+_0xc4e525[_0x2f37da(0x1be)][0x0]+'</p>';return;}const _0x8bed1f=_0xc4e525[_0x2f37da(0x19e)];window['HACIENDOLA'][_0x2f37da(0x1c1)][_0x2f37da(0x1ca)]=_0x8bed1f;let _0x5a6f64='';_0x8bed1f[_0x2f37da(0x19f)]===0x0?document[_0x2f37da(0x196)]('shippingEstimatePrice')[_0x2f37da(0x1d0)]='<p\x20style=\x22color:#000;\x22>No\x20hay\x20tarifas\x20de\x20envío\x20disponibles\x20para\x20este\x20carrito</p>':(_0x5a6f64=_0x2f37da(0x1d5),_0x8bed1f['forEach'](_0x13f74b=>{const _0x2de71e=_0x2f37da,_0x16cef5=window[_0x2de71e(0x1ab)][_0x2de71e(0x1c1)][_0x2de71e(0x1c0)][_0x2de71e(0x1d6)](_0x1d45ad=>_0x1d45ad===_0x13f74b[_0x2de71e(0x19b)])!==-0x1;!_0x16cef5&&(_0x5a6f64+=_0x2de71e(0x1bc)+_0x13f74b[_0x2de71e(0x1a5)]+_0x2de71e(0x1bf)+number_format(_0x13f74b[_0x2de71e(0x1cc)])+_0x2de71e(0x1a4));})),document[_0x2f37da(0x196)]('shippingEstimatePrice')[_0x2f37da(0x1d0)]=_0x5a6f64;});},document['getElementById'](_0x432513(0x1cf))[_0x432513(0x1b4)](_0x432513(0x198),communaSelectChangeHandler),document[_0x432513(0x196)](_0x432513(0x199))[_0x432513(0x1b4)](_0x432513(0x198),regionSelectChangeHandler),fetch(_0x432513(0x1ad)+window[_0x432513(0x1ab)][_0x432513(0x1c1)][_0x432513(0x1a0)])[_0x432513(0x1c6)](_0x2bb2bf=>_0x2bb2bf[_0x432513(0x1a2)]())['then'](_0x4d11c2=>{const _0x2a6763=_0x432513;window[_0x2a6763(0x1ab)]['TARIFICADOR'][_0x2a6763(0x1c2)]=_0x4d11c2;const _0x3c8393=_0x4d11c2['reduce']((_0x31837f,_0x3308b3)=>_0x31837f+_0x2a6763(0x1a1)+_0x3308b3[_0x2a6763(0x19d)]+'>'+_0x3308b3[_0x2a6763(0x19a)]+'</option>',_0x2a6763(0x1ac));document['getElementById'](_0x2a6763(0x199))['innerHTML']=_0x3c8393,_0x4d11c2[_0x2a6763(0x19f)]===0x1?(document[_0x2a6763(0x196)](_0x2a6763(0x199))[_0x2a6763(0x1ae)]=_0x4d11c2[0x0][_0x2a6763(0x19d)],document[_0x2a6763(0x196)]('provincesInput')[_0x2a6763(0x197)]=!![],regionSelectChangeHandler()):document[_0x2a6763(0x196)]('provincesInput')[_0x2a6763(0x1b0)][_0x2a6763(0x1c3)](_0x2a6763(0x1b6)),document[_0x2a6763(0x196)]('tarificadorCartShippingCalculatorWrapper')[_0x2a6763(0x1b0)][_0x2a6763(0x1c3)](_0x2a6763(0x1b6)),document[_0x2a6763(0x1b2)](window[_0x2a6763(0x1ab)]['TARIFICADOR']['goToCheckoutButtonName'])[_0x2a6763(0x1b9)](_0x297b13=>{const _0x2cd030=_0x2a6763;_0x297b13[_0x2cd030(0x1b4)]('click',_0x2bbe6d=>{const _0x287184=_0x2cd030,_0x77da7=document[_0x287184(0x196)](_0x287184(0x1cf));if(_0x77da7['selectedIndex']===0x0&&window[_0x287184(0x1ab)][_0x287184(0x1c1)][_0x287184(0x1b1)])return _0x2bbe6d[_0x287184(0x1b8)](),_0x2bbe6d[_0x287184(0x1b3)](),alert('Debe\x20seleccionar\x20región\x20y\x20comuna\x20de\x20envío'),![];if(_0x77da7[_0x287184(0x1c4)]>0x0){const _0x1fc676=_0x77da7[_0x287184(0x1d7)][_0x77da7[_0x287184(0x1c4)]][_0x287184(0x1b5)];document[_0x287184(0x196)](window[_0x287184(0x1ab)][_0x287184(0x1c1)][_0x287184(0x1d4)])['action']=_0x287184(0x1c5)+_0x1fc676;}});});}));
</script>
